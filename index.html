<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پیش‌گویی تاریخ مرگ</title>
    
    <style>
        @font-face {
            font-family: 'Vazir';
            src: url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.0.0/fonts/webfonts/Vazirmatn-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'Vazir', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            direction: rtl;
            text-align: right;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .hidden {
            display: none !important;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin: 20px;
        }

        h1, h2, h3 {
            color: #333;
            text-align: center;
            font-weight: bold;
        }

        h1 {
            font-size: 2.5rem;
            color: #007bff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
            color: #555;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }
        
        input[type="text"]:focus, input[type="number"]:focus {
            border-color: #007bff;
            outline: none;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Vazir', sans-serif;
            font-size: 1.1rem;
            width: 100%;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        .question {
            margin-bottom: 30px;
            padding: 15px;
            border-radius: 10px;
            background-color: #f8f9fa;
        }

        .question p {
            font-weight: bold;
            margin-bottom: 15px;
            color: #444;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .option input[type="radio"] {
            display: none;
        }

        .option label {
            display: block;
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            text-align: center;
        }

        .option input[type="radio"]:checked + label {
            background-color: #e2f4ff;
            border-color: #007bff;
            font-weight: bold;
        }

        #tombstone {
            background: #6c757d; /* A better, more readable color for the tombstone */
            color: #fff;
            padding: 50px 20px;
            margin: 40px auto;
            text-align: center;
            position: relative;
            max-width: 450px;
            min-height: 550px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 5px solid #495057;
            border-radius: 20px 20px 10px 10px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        #tombstone .top-text {
            font-size: 0.9rem;
            margin-bottom: 10px;
            color: #f8f9fa;
        }

        #tombstone .top-poem {
            font-size: 1.1rem;
            font-style: italic;
            margin-bottom: 20px;
            color: #f8f9fa;
        }

        .tombstone-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #tombstone-name {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        #tombstone-dates {
            font-size: 1.2rem;
            margin-top: 0;
            color: #eee;
        }

        #tombstone hr {
            width: 70%;
            border-color: rgba(255, 255, 255, 0.5);
            margin: 20px auto;
        }

        #tombstone-bio, #tombstone-cause, #tombstone-poem {
            font-size: 1rem;
            margin: 15px 0;
            line-height: 1.8;
            color: #f1f3f5;
        }

        .final-message {
            text-align: center;
            margin-top: 30px;
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .final-message h2 {
            color: #e74c3c;
            font-size: 1.8rem;
        }
        
        .final-message p {
            font-size: 1rem;
            color: #555;
            margin-bottom: 20px;
        }

        #suggestions-list {
            list-style-type: none;
            padding: 0;
            text-align: right;
        }

        #suggestions-list li {
            background: #ffecec;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-right: 5px solid #e74c3c;
            color: #555;
        }

        footer {
            margin-top: 20px;
            font-size: 0.8rem;
            color: #777;
            text-align: center;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>پیش‌گویی تاریخ مرگ</h1>
            <p style="text-align: center; color: #555;">با پاسخ به چند سوال ساده، از آینده خود باخبر شوید!</p>
        </header>

        <main>
            <section id="user-info-section" class="card">
                <h2>اطلاعات فردی</h2>
                <form id="user-info-form">
                    <div class="form-group">
                        <label for="name">نام و نام خانوادگی:</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="age">سن:</label>
                        <input type="number" id="age" min="1" max="120" required>
                    </div>
                    <button type="submit" id="start-btn">شروع پیش‌گویی</button>
                </form>
            </section>

            <section id="questions-section" class="card hidden">
                <h2>سوالات سبک زندگی</h2>
                <form id="questions-form">
                    </form>
                <button id="calculate-btn">محاسبه تاریخ مرگ</button>
            </section>

            <section id="results-section" class="card hidden">
                <div id="tombstone">
                    <p class="top-text">إنا لله وإنا إليه راجعون</p>
                    <p class="top-poem">گلچین روزگار عجب خوش سلیقه است</p>
                    <div class="tombstone-content">
                        <h3 id="tombstone-name"></h3>
                        <p id="tombstone-dates"></p>
                        <hr>
                        <p id="tombstone-bio"></p>
                        <p id="tombstone-cause"></p>
                        <p id="tombstone-poem"></p>
                    </div>
                </div>
                <div class="final-message">
                    <p id="final-congrats"></p>
                    <h2>کارهایی که باید انجام دهی</h2>
                    <p>این فرصت را از دست نده تا کارهای زیر را با آمادگی کامل انجام دهی:</p>
                    <ul id="suggestions-list">
                        </ul>
                </div>
                <button id="restart-btn">شروع مجدد</button>
            </section>
        </main>
        <footer>
            <p>این تاریخ با مشارکت دانشگاه پیتر و جورج انگلستان، صنایع نیمه‌هادی تایوان، دانشگاه کیم جونگ اون کره شمالی و وزارت دفاع آمریکا طراحی و تایید شده است. تاریخ‌ها کاملاً دقیق و معتبر هستند.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const userInfoSection = document.getElementById('user-info-section');
            const questionsSection = document.getElementById('questions-section');
            const resultsSection = document.getElementById('results-section');
            const userInfoForm = document.getElementById('user-info-form');
            const questionsForm = document.getElementById('questions-form');
            const nameInput = document.getElementById('name');
            const ageInput = document.getElementById('age');
            const calculateBtn = document.getElementById('calculate-btn');
            const restartBtn = document.getElementById('restart-btn');
            const tombstoneName = document.getElementById('tombstone-name');
            const tombstoneDates = document.getElementById('tombstone-dates');
            const tombstoneBio = document.getElementById('tombstone-bio');
            const tombstoneCause = document.getElementById('tombstone-cause');
            const tombstonePoem = document.getElementById('tombstone-poem');
            const suggestionsList = document.getElementById('suggestions-list');
            const finalCongrats = document.getElementById('final-congrats');

            let userName = '';
            let userAge = 0;

            const questions = [
                {
                    text: "چه مقدار در روز ورزش می‌کنید؟",
                    options: [
                        { text: "بیش از ۱ ساعت", score: 5 },
                        { text: "۳۰ دقیقه تا ۱ ساعت", score: 3 },
                        { text: "کمتر از ۳۰ دقیقه", score: 1 },
                        { text: "اصلا ورزش نمی‌کنم", score: -5 },
                        { text: "فقط آخر هفته‌ها", score: 2 },
                        { text: "به ندرت", score: -3 }
                    ],
                    cause: ["با توجه به کم‌تحرکی، سکته قلبی و ضعف عمومی بدن علت مرگ را تسریع خواهد کرد.", "به دلیل ورزش نکردن، ضعف عضلانی و فرسودگی استخوان‌بندی بدن به وجود آمده و مرگ را تسریع می‌کند."]
                },
                {
                    text: "میزان مصرف سیگار و دخانیات شما چقدر است؟",
                    options: [
                        { text: "اصلا مصرف نمی‌کنم", score: 10 },
                        { text: "بسیار کم", score: 5 },
                        { text: "گاهی اوقات", score: 0 },
                        { text: "روزانه (کمتر از ۵ نخ)", score: -5 },
                        { text: "روزانه (بیش از ۵ نخ)", score: -10 },
                        { text: "قلیان هم می‌کشم", score: -12 }
                    ],
                    cause: ["سرطان ریه به علت مصرف دخانیات", "بیماری‌های تنفسی و آسم"]
                },
                {
                    text: "رژیم غذایی شما چگونه است؟",
                    options: [
                        { text: "کاملاً سالم", score: 8 },
                        { text: "تقریباً سالم", score: 4 },
                        { text: "متوسط", score: 0 },
                        { text: "زیاد فست‌فود و چرب", score: -8 },
                        { text: "فقط فست‌فود", score: -10 },
                        { text: "رژیم غذایی خاصی ندارم", score: -2 }
                    ],
                    cause: ["دیابت به دلیل تغذیه ناسالم", "بیماری‌های گوارشی و چاقی مفرط", "کلسترول بالا و تصلب شرایین"]
                },
                {
                    text: "میزان استرس و اضطراب در زندگی شما چقدر است؟",
                    options: [
                        { text: "بسیار کم", score: 5 },
                        { text: "متوسط", score: 0 },
                        { text: "زیاد", score: -5 },
                        { text: "همیشه مضطربم", score: -7 },
                        { text: "مدیریت استرس را بلد هستم", score: 3 },
                        { text: "اصلا استرس ندارم", score: 6 }
                    ],
                    cause: ["سکته مغزی ناشی از استرس زیاد", "فشار خون بالا", "مرگ ناگهانی در اثر شوک عصبی"]
                },
                {
                    text: "کیفیت خواب شما چگونه است؟",
                    options: [
                        { text: "بسیار عالی (۸ ساعت)", score: 7 },
                        { text: "خوب (۷-۸ ساعت)", score: 5 },
                        { text: "متوسط (۶ ساعت)", score: 0 },
                        { text: "کم (کمتر از ۶ ساعت)", score: -5 },
                        { text: "خوابم به هم ریخته است", score: -6 },
                        { text: "بی‌خوابی دارم", score: -10 }
                    ],
                    cause: ["فرسودگی عصبی و ضعف سیستم ایمنی", "تصادف در اثر خواب‌آلودگی"]
                },
                {
                    text: "چند بار در سال چکاپ پزشکی انجام می‌دهید؟",
                    options: [
                        { text: "سالانه", score: 10 },
                        { text: "هر دو سال یک بار", score: 5 },
                        { text: "هر چند سال یک بار", score: 0 },
                        { text: "تا مریض نشم، دکتر نمی‌رم", score: -10 },
                        { text: "فقط برای بیماری", score: -5 },
                        { text: "به طور منظم", score: 8 }
                    ],
                    cause: ["تشخیص دیررس بیماری‌ها", "مرگ ناگهانی به دلیل عدم آگاهی از بیماری زمینه‌ای"]
                },
                {
                    text: "آیا از کمربند ایمنی در خودرو استفاده می‌کنید؟",
                    options: [
                        { text: "بله، همیشه", score: 10 },
                        { text: "گاهی اوقات", score: 5 },
                        { text: "به ندرت", score: -5 },
                        { text: "اصلا", score: -10 },
                        { text: "فقط در جاده", score: 2 },
                        { text: "فقط در شهر", score: 1 }
                    ],
                    cause: ["تصادف و جراحات شدید", "مرگ مغزی به علت ضربه شدید به سر"]
                },
                {
                    text: "آیا در رانندگی عجول هستید؟",
                    options: [
                        { text: "اصلا", score: 8 },
                        { text: "به ندرت", score: 4 },
                        { text: "گاهی اوقات", score: 0 },
                        { text: "بله، اغلب اوقات", score: -8 },
                        { text: "خیلی زیاد", score: -12 },
                        { text: "بیشتر از دیگران", score: -10 }
                    ],
                    cause: ["تصادف مرگبار به علت رانندگی پرخطر"]
                },
                {
                    text: "روابط اجتماعی شما چگونه است؟",
                    options: [
                        { text: "بسیار قوی", score: 8 },
                        { text: "خوب", score: 5 },
                        { text: "متوسط", score: 0 },
                        { text: "ضعیف", score: -5 },
                        { text: "بسیار ضعیف", score: -8 },
                        { text: "منزوی هستم", score: -10 }
                    ],
                    cause: ["افسردگی شدید و تنهایی", "مرگ ناگهانی ناشی از انزوا"]
                },
                {
                    text: "میزان مصرف نوشیدنی‌های قنددار چقدر است؟",
                    options: [
                        { text: "اصلا", score: 8 },
                        { text: "کم", score: 4 },
                        { text: "متوسط", score: 0 },
                        { text: "زیاد", score: -8 },
                        { text: "بسیار زیاد", score: -10 },
                        { text: "فقط برای مهمانی", score: -2 }
                    ],
                    cause: ["دیابت به علت مصرف قند زیاد", "چاقی مفرط", "سکته قلبی"]
                },
                {
                    text: "چقدر از وقت خود را به مطالعه می‌گذرانید؟",
                    options: [
                        { text: "بیش از ۱ ساعت در روز", score: 5 },
                        { text: "۱ ساعت در روز", score: 3 },
                        { text: "کمتر از ۳۰ دقیقه", score: 1 },
                        { text: "اصلا", score: -3 },
                        { text: "به ندرت", score: 0 },
                        { text: "فقط درسی", score: 2 }
                    ],
                    cause: ["زوال عقل و آلزایمر", "فراموشی و کاهش عملکرد مغزی"]
                },
                {
                    text: "چند بار در هفته به پیاده‌روی می‌روید؟",
                    options: [
                        { text: "بیش از ۵ بار", score: 8 },
                        { text: "۳ تا ۵ بار", score: 5 },
                        { text: "۱ تا ۲ بار", score: 2 },
                        { text: "به ندرت", score: -3 },
                        { text: "اصلا", score: -5 },
                        { text: "فقط در مسیر کار", score: 1 }
                    ],
                    cause: ["بیماری‌های قلبی", "چاقی", "افسردگی ناشی از کم‌تحرکی"]
                },
                {
                    text: "آیا در محیط کار یا منزل، به ایمنی توجه می‌کنید؟",
                    options: [
                        { text: "بله، همیشه", score: 10 },
                        { text: "گاهی اوقات", score: 5 },
                        { text: "به ندرت", score: -5 },
                        { text: "اصلا", score: -10 },
                        { text: "فقط به توصیه دیگران", score: 0 },
                        { text: "فقط برای کارهای خطرناک", score: 3 }
                    ],
                    cause: ["حوادث شغلی", "برق‌گرفتگی", "سقوط از ارتفاع", "برخورد با جسم سخت"]
                },
                {
                    text: "میزان مصرف نمک و شکر در غذاهای شما چقدر است؟",
                    options: [
                        { text: "کم", score: 8 },
                        { text: "متوسط", score: 4 },
                        { text: "زیاد", score: -8 },
                        { text: "بسیار زیاد", score: -12 },
                        { text: "فقط در شیرینی‌جات", score: -5 },
                        { text: "فقط در غذاهای فست‌فود", score: -6 }
                    ],
                    cause: ["فشار خون بالا", "دیابت", "سکته قلبی"]
                },
                {
                    text: "چند بار در سال به سفر می‌روید؟",
                    options: [
                        { text: "بیش از ۵ بار", score: 5 },
                        { text: "۳ تا ۵ بار", score: 3 },
                        { text: "۱ تا ۲ بار", score: 1 },
                        { text: "به ندرت", score: -2 },
                        { text: "اصلا", score: -5 },
                        { text: "فقط در تعطیلات", score: 0 }
                    ],
                    cause: ["تصادف جاده‌ای", "سقوط هواپیما", "مرگ در اثر مسمومیت غذایی"]
                },
                {
                    text: "آیا در محیط‌های باز از ضدآفتاب استفاده می‌کنید؟",
                    options: [
                        { text: "بله، همیشه", score: 8 },
                        { text: "گاهی اوقات", score: 4 },
                        { text: "به ندرت", score: 0 },
                        { text: "اصلا", score: -8 },
                        { text: "فقط در تابستان", score: 2 },
                        { text: "فقط وقتی هوا آفتابی است", score: 3 }
                    ],
                    cause: ["سرطان پوست", "پیری زودرس پوست"]
                },
                {
                    text: "روابط شما با خانواده‌تان چگونه است؟",
                    options: [
                        { text: "بسیار عالی", score: 8 },
                        { text: "خوب", score: 5 },
                        { text: "متوسط", score: 0 },
                        { text: "بد", score: -5 },
                        { text: "بسیار بد", score: -8 },
                        { text: "تنها زندگی می‌کنم", score: 2 }
                    ],
                    cause: ["افسردگی شدید و تنهایی", "مرگ ناگهانی ناشی از تنش روانی"]
                },
                {
                    text: "آیا از مواد مخدر استفاده می‌کنید؟",
                    options: [
                        { text: "اصلا", score: 15 },
                        { text: "بسیار کم", score: -5 },
                        { text: "گاهی اوقات", score: -10 },
                        { text: "بله، به طور منظم", score: -20 },
                        { text: "فقط تفریحی", score: -12 },
                        { text: "فقط در مهمانی‌ها", score: -8 }
                    ],
                    cause: ["اور دوز و مسمومیت", "بیماری‌های کبدی", "سکته مغزی"]
                },
                {
                    text: "میزان مصرف الکل شما چقدر است؟",
                    options: [
                        { text: "اصلا", score: 10 },
                        { text: "خیلی کم", score: 5 },
                        { text: "گاهی اوقات", score: -5 },
                        { text: "روزانه", score: -15 },
                        { text: "بیش از حد", score: -20 },
                        { text: "فقط در مهمانی‌ها", score: -2 }
                    ],
                    cause: ["سیروز کبدی و سرطان کبد", "تصادف در حالت مستی"]
                },
                {
                    text: "چند بار در هفته ماهی می‌خورید؟",
                    options: [
                        { text: "بیش از ۳ بار", score: 5 },
                        { text: "۱ تا ۳ بار", score: 3 },
                        { text: "به ندرت", score: 0 },
                        { text: "اصلا", score: -3 },
                        { text: "فقط در رستوران", score: 1 },
                        { text: "حساسیت دارم", score: 0 }
                    ],
                    cause: ["ضعف عملکرد مغزی", "مشکلات قلبی"]
                },
                {
                    text: "آیا به صورت منظم از سمعک یا عینک استفاده می‌کنید؟",
                    options: [
                        { text: "بله، همیشه", score: 8 },
                        { text: "گاهی اوقات", score: 4 },
                        { text: "به ندرت", score: 0 },
                        { text: "اصلا", score: -8 },
                        { text: "فقط برای کار", score: 2 },
                        { text: "فقط برای مطالعه", score: 3 }
                    ],
                    cause: ["تصادف در اثر ضعف بینایی", "ضعف شنوایی و عدم توجه به هشدارها"]
                },
                {
                    text: "آیا در محیط‌های طبیعی و شلوغ احساس ناراحتی می‌کنید؟",
                    options: [
                        { text: "اصلا", score: 5 },
                        { text: "کمی", score: 2 },
                        { text: "متوسط", score: 0 },
                        { text: "زیاد", score: -5 },
                        { text: "بسیار زیاد", score: -8 },
                        { text: "منزوی هستم", score: -10 }
                    ],
                    cause: ["حمله حیوانات وحشی", "نیش زنبور در طبیعت", "خورده شدن توسط کروکودیل (در صورت زندگی در محیط‌های خاص)"]
                },
                {
                    text: "آیا به صورت منظم به تفکر و مدیتیشن می‌پردازید؟",
                    options: [
                        { text: "بله، زیاد", score: 7 },
                        { text: "گاهی اوقات", score: 4 },
                        { text: "به ندرت", score: 0 },
                        { text: "اصلا", score: -5 },
                        { text: "فقط در زمان استرس", score: 1 },
                        { text: "فقط صبح ها", score: 3 }
                    ],
                    cause: ["افسردگی شدید", "تنش روانی", "مرگ ناگهانی ناشی از فشار عصبی"]
                },
                {
                    text: "آیا در هنگام عصبانیت، تصمیمات ناگهانی می‌گیرید؟",
                    options: [
                        { text: "اصلا", score: 8 },
                        { text: "به ندرت", score: 5 },
                        { text: "گاهی اوقات", score: 0 },
                        { text: "بله، اغلب اوقات", score: -8 },
                        { text: "بسیار زیاد", score: -12 },
                        { text: "در حال کنترل آن هستم", score: 3 }
                    ],
                    cause: ["تصادف ناشی از تصمیمات عجولانه", "مرگ ناگهانی به دلیل خشم زیاد", "سکته قلبی"]
                },
                {
                    text: "آیا به صورت منظم از نوشیدنی‌های انرژی‌زا استفاده می‌کنید؟",
                    options: [
                        { text: "بله، زیاد", score: -10 },
                        { text: "گاهی اوقات", score: -5 },
                        { text: "به ندرت", score: 0 },
                        { text: "اصلا", score: 10 },
                        { text: "فقط در زمان خستگی", score: -3 },
                        { text: "فقط در ورزش", score: -2 }
                    ],
                    cause: ["بیماری‌های قلبی", "فشار خون بالا", "بی‌خوابی مزمن"]
                }
            ];

            const poems = [
                "اینجا کسی خفته که عمری به یاد داشت،\nخیر و نیکی را به قلب و جان کاشت.",
                "سایهٔ وجودش گرمی‌بخش بود،\nروحش اکنون در بهشت جاودانه خفت.",
                "عشق او چون شعله‌ای در دل‌هاست،\nگرچه رفته، یاد او همیشه با ماست.",
                "خاک سرد، آرامگاه جسم او،\nروح او، آزاد از این دنیای پوچ.",
                "او رفت و یادش به دل‌ها ماندگار،\nدر این سرای فانی، بود او یک یادگار.",
                "در این سکوت ابدی، خوابیده است،\nآنکه از دنیا و غمش بریده است.",
                "اینجا پایان یک زندگی نیست،\nآغاز سفری نو، تا ابدیت است.",
                "عشق او مانند خورشید تابید،\nدر تاریکی دل‌ها، نوری دمید.",
                "آنکه رفت، از دنیا تنها شد،\nدر کنار خدا، آسوده خفت.",
                "قلب او دریایی از محبت بود،\nیادش همیشه در دل‌ها جاویدان است.",
                "گرچه دیگر نیست، در یادها زنده است،\nآنکه عشق و خوبی را به ما آموخت.",
                "زیر این خاک، جسمی آرام خفته،\nروانش به سوی آسمان‌ها رفته.",
                "اینجا خفته آنکه دلش پاک بود،\nهمچو قطره‌ای در دریای نور بود.",
                "او رفت و دل‌ها به سوگش نشستند،\nاما خاطراتش، هرگز از یاد نرفتند.",
                "سخن عشق او را همه شنیدند،\nاز این دنیا به دنیایی دیگر پریدند.",
                "چو پرنده‌ای از قفس رها شد،\nبه سوی باغ ابدی پرواز کرد.",
                "آنکه در دل ما جای گرفت،\nتا ابد، نامش در یادها ماندگار است.",
                "خواب شیرین ابدی، در این مکان،\nتا روز حشر، در آرامش و امان.",
                "ای دوست، اگر گذرت بر این قبر افتاد،\nدعایی به روح خفته در خاک یاد کن.",
                "ما همه از خداییم و به سوی او بازمی‌گردیم،\nاینجا پایان راهی نیست، آغاز است."
            ];

            const bios = [
                "او فردی بود که با سخت‌کوشی و پشتکار، همیشه به دنبال اهدافش می‌رفت. در تمام مراحل زندگی، امیدش را از دست نداد و به دیگران هم انگیزه می‌داد.",
                "زندگی او پر از ماجراجویی و هیجان بود. همیشه به دنبال تجربه‌های جدید بود و هیچ وقت از ریسک کردن نمی‌ترسید.",
                "او فردی آرام و متفکر بود. بیشتر وقتش را به مطالعه و یادگیری می‌گذراند و همیشه در پی کشف حقایق بود.",
                "او همیشه به دیگران کمک می‌کرد و هرگز از سختی‌ها خسته نمی‌شد. لبخندش، نشانه‌ای از امید و مهربانی بود.",
                "در زندگی‌اش، عشق به خانواده حرف اول را می‌زد. همه لحظاتش را با عزیزانش سپری کرد و خاطرات شیرینی به یادگار گذاشت.",
                "او یک هنرمند به تمام معنا بود. هر چیزی که به دستش می‌رسید، به یک اثر هنری زیبا تبدیل می‌کرد.",
                "روحیه ورزشی و رقابتی‌اش مثال‌زدنی بود. همیشه برای رسیدن به بهترین‌ها تلاش می‌کرد و هیچ وقت ناامید نمی‌شد.",
                "او همیشه به دنبال حقیقت بود و از دروغ و ریا دوری می‌کرد. یک زندگی صادقانه و پر از آرامش را برای خودش ساخت.",
                "زندگی او سرشار از سفر و کشف بود. هر جا که می‌رفت، بخشی از قلبش را همانجا جا می‌گذاشت و به یادگار می‌گرفت.",
                "او یک فعال اجتماعی بود و همیشه برای بهبود جامعه تلاش می‌کرد. هرگز از مبارزه برای حقوق دیگران دست نکشید.",
                "همیشه لبخندی بر لب داشت و به همه انرژی مثبت می‌داد. حضورش در هر جمعی، باعث شادی و نشاط بود.",
                "زندگی‌اش مثل یک کتاب پرماجرا بود. هر صفحه از آن، یک درس جدید و یک تجربه تازه داشت.",
                "او یک معلم به دنیا آمده بود. دانش و تجربه‌اش را با همه به اشتراک می‌گذاشت و به دیگران کمک می‌کرد تا رشد کنند.",
                "او یک فرد خلاق و نوآور بود. همیشه ایده‌های جدیدی داشت و هیچ وقت از امتحان کردن آن‌ها نمی‌ترسید.",
                "زندگی او سرشار از موسیقی و هنر بود. هر لحظه از زندگی‌اش، با یک نوای زیبا همراه بود.",
                "او یک فرد باهوش و بااستعداد بود. هیچ چالشی برایش سخت نبود و همیشه راهی برای حل مشکلات پیدا می‌کرد.",
                "زندگی او مثل یک شعر زیبا بود. هر کلمه‌اش، پر از احساس و معنی بود.",
                "او یک فرد صبور و آرام بود. هیچ چیز نمی‌توانست او را از مسیرش منحرف کند و همیشه با آرامش به همه چیز نگاه می‌کرد.",
                "زندگی او سرشار از خنده و شادی بود. هیچ وقت از شوخی و تفریح خسته نمی‌شد و همیشه به دنبال شادی بود.",
                "او یک فرد مهربان و دلسوز بود. همیشه به فکر دیگران بود و هرگز از کمک به آن‌ها دریغ نمی‌کرد.",
                "زندگی او مثل یک نقاشی زیبا بود. هر رنگ، نشانه‌ای از احساس و عشقش بود.",
                "او یک فرد شجاع و جسور بود. هیچ ترسی از شکست نداشت و همیشه با شجاعت به سمت اهدافش می‌رفت.",
                "زندگی او سرشار از عشق و محبت بود. هر کجا که قدم می‌گذاشت، بذر عشق و محبت را می‌کاشت.",
                "او یک فرد با ایمان و اعتقاد بود. همیشه به خدا توکل می‌کرد و هیچ وقت ناامید نمی‌شد.",
                "زندگی او مثل یک رودخانه بود. همیشه در حال حرکت و جریان بود و هیچ وقت متوقف نمی‌شد.",
                "او یک فرد متواضع و فروتن بود. هرگز به خود مغرور نمی‌شد و همیشه با احترام با دیگران رفتار می‌کرد.",
                "او فردی با حس مسئولیت بالا بود. همیشه به عهد خود پایبند بود و به دیگران اعتماد می‌کرد.",
                "زندگی‌اش سرشار از لحظات خوش و شیرین بود. او همیشه به دنبال ساختن خاطرات خوب با عزیزانش بود.",
                "او یک فرد منظم و دقیق بود. هر کاری را با دقت و وسواس انجام می‌داد و به جزئیات اهمیت می‌داد.",
                "زندگی‌اش مثل یک تابلوی نقاشی بود که خودش آن را با عشق و علاقه رنگ کرده بود."
            ];

            const suggestions = [
                "ببین چه کسی ازت پول می‌خواد؟ از اون پول بگیر. می‌دونی چرا؟ چون دیگه بعدش فرصتی نیست که پس بدی!",
                "زنگ بزن به هر کسی که اذیت کرده و تمام حرف‌های دلت رو بگو. دیگه بعدش فرصتی نیست، حداقل وجدانت راحت باشه.",
                "به اون دوستت که پولش رو خورده بودی زنگ بزن، بگو شرمنده داداش، اون دنیا جبران می‌کنم.",
                "سنگ قبر خودت رو از همین الان بخر و بگو چی دوست داری روش حکاکی شه. سلیقه‌ت رو به بقیه نشون بده.",
                "لیستی از کارهایی که همیشه دوست داشتی انجام بدی اما وقتش رو نداشتی، آماده کن و انجام بده.",
                "یک وصیت‌نامه طنزآلود و خنده‌دار بنویس و توش مشخص کن که هر کدوم از وسایلت به چه کسی برسه.",
                "یک درخت بکار. حتی اگر قرار نیست درختی رو که کاشتی ببینی، مطمئن باش سایه‌اش به سر یکی از عزیزانت می‌رسه.",
                "تمامی وسایلی که به دردت نمی‌خوره رو ببخش به نیازمندان تا علاوه بر کمک به دیگران، اطرافیان برای جمع کردنشون به زحمت نیفتن.",
                "تمام رمزهای عبور شبکه‌های اجتماعیت رو یادداشت کن و بذار توی کشوی میزت تا بعد از تو، همه بتونن از خاطراتت لذت ببرن.",
                "اون لباسی که همیشه دوست داشتی بخری و به خودت می‌گفتی «حیفه»، همین امروز بخر و بپوش.",
                "به کسی که دوستش داری زنگ بزن و بگو «دوستت دارم»، چون شاید دیگه فرصتی نباشه.",
                "یک سلفی با تمام کسانی که دوستشون داری بگیر و بذار توی قاب تا به یادگار بمونه.",
                "به کسی که سال‌هاست ازش خبر نداری، زنگ بزن و احوالپرسی کن.",
                "یک نامه به خودت در آینده بنویس، اما وقتی که دست‌نوشته رو پیدا کنن، می‌فهمن که دیگه در آینده نیستی.",
                "برو به اون رستورانی که همیشه دوست داشتی بری و گرون بود، و هر چی دلت می‌خواد سفارش بده.",
                "اگر از کسی کینه‌ای به دل داری، ببخش تا خودت سبک‌بارتر بشی.",
                "تمام کتاب‌هایی رو که همیشه می‌خواستی بخونی و فرصت نداشتی، شروع کن.",
                "یک مسافرت طولانی برو و هر جایی که دوست داری برو و با دنیا خداحافظی کن.",
                "تمام بدهی‌هات رو صاف کن تا بعد از تو، اطرافیانت با مشکلات مالی روبرو نشن.",
                "به یه دوستت که مدام غر می‌زنه، زنگ بزن و بهش بگو «غر نزن، زندگی کوتاهه».",
                "یک وعده غذای سالم و خوشمزه برای خودت درست کن و با لذت بخورش.",
                "یک فیلمی رو ببین که همیشه دوست داشتی و فرصت تماشاش رو نداشتی.",
                "یک شعر از حافظ یا سعدی انتخاب کن و برای خودت بخون.",
                "اگر به کسی قول دادی و عمل نکردی، همین امروز جبران کن.",
                "اگر از کسی ناراحت هستی، بهش بگو و باهاش صحبت کن.",
                "تمام عکس‌های قدیمی رو مرور کن و با یادآوری خاطرات، لبخند بزن.",
                "یک کار خیر انجام بده و به کسی که نیاز داره کمک کن.",
                "اگر از کسی پول قرض گرفتی، همین امروز پس بده.",
                "یک کار هنری یا دستی انجام بده و به خودت افتخار کن.",
                "یک نامه به پدر و مادرت بنویس و ازشون تشکر کن."
            ];

            // Functions
            const showSection = (section) => {
                userInfoSection.classList.add('hidden');
                questionsSection.classList.add('hidden');
                resultsSection.classList.add('hidden');
                section.classList.remove('hidden');
            };

            const generateQuestions = () => {
                questionsForm.innerHTML = '';
                questions.forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.classList.add('question');
                    questionDiv.innerHTML = `
                        <p>${index + 1}. ${q.text}</p>
                        <div class="options-container">
                            ${q.options.map((option, i) => `
                                <div class="option">
                                    <input type="radio" id="q${index}-o${i}" name="q${index}" value="${option.score}" required>
                                    <label for="q${index}-o${i}">${option.text}</label>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    questionsForm.appendChild(questionDiv);
                });
            };

            const calculateLifeExpectancy = (totalScore) => {
                let baseLife = 80;
                let deathAge = baseLife + (totalScore / 10);
                return Math.max(40, Math.min(120, Math.floor(deathAge)));
            };

            const getRandomElement = (array) => {
                return array[Math.floor(Math.random() * array.length)];
            };

            const getDeathDetails = (deathAge) => {
                const today = new Date();
                const birthYear = today.getFullYear() - userAge;
                const deathDate = new Date();
                deathDate.setFullYear(birthYear + deathAge);
                deathDate.setMonth(Math.floor(Math.random() * 12));
                deathDate.setDate(Math.floor(Math.random() * 28) + 1);
                deathDate.setHours(Math.floor(Math.random() * 24));
                deathDate.setMinutes(Math.floor(Math.random() * 60));

                const deathJalali = new Intl.DateTimeFormat('fa-IR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: 'numeric'
                }).format(deathDate);

                const weekday = new Intl.DateTimeFormat('fa-IR', { weekday: 'long' }).format(deathDate);

                return {
                    birthYear,
                    deathJalali: `${deathJalali} (${weekday})`,
                };
            };

            const getCauseAndBio = (selectedCauses) => {
                const causeCounts = selectedCauses.reduce((acc, cause) => {
                    acc[cause] = (acc[cause] || 0) + 1;
                    return acc;
                }, {});
                
                const sortedCauses = Object.keys(causeCounts).sort((a, b) => causeCounts[b] - causeCounts[a]);
                
                let deathCauseText = "علت فوت: علت دقیق فوت مشخص نیست، اما به احتمال زیاد به دلیل کهولت سن و عوامل طبیعی بوده است.";
                if (sortedCauses.length > 0) {
                    const primaryCause = sortedCauses[0];
                    if (sortedCauses.length > 1) {
                        const secondaryCause = sortedCauses[1];
                        deathCauseText = `علت فوت: ${primaryCause} و در نهایت ${secondaryCause}.`;
                    } else {
                        deathCauseText = `علت فوت: ${primaryCause}.`;
                    }
                }

                const randomBio = getRandomElement(bios);
                return { deathCauseText, randomBio };
            };

            const showSuggestions = () => {
                suggestionsList.innerHTML = '';
                const shuffledSuggestions = suggestions.sort(() => 0.5 - Math.random());
                const selectedSuggestions = shuffledSuggestions.slice(0, Math.min(shuffledSuggestions.length, 5));
                selectedSuggestions.forEach(s => {
                    const li = document.createElement('li');
                    li.textContent = s;
                    suggestionsList.appendChild(li);
                });
            };

            // Event Listeners
            userInfoForm.addEventListener('submit', (e) => {
                e.preventDefault();
                userName = nameInput.value;
                userAge = parseInt(ageInput.value, 10);
                
                if (userAge <= 0 || userAge > 120) {
                    alert('لطفا سن معتبر وارد کنید.');
                    return;
                }

                generateQuestions();
                showSection(questionsSection);
            });

            calculateBtn.addEventListener('click', () => {
                const formData = new FormData(questionsForm);
                let totalScore = 0;
                let selectedCauses = [];
                let answeredCount = 0;

                questions.forEach((q, index) => {
                    const selectedOptionValue = formData.get(`q${index}`);
                    if (selectedOptionValue !== null) {
                        totalScore += parseInt(selectedOptionValue, 10);
                        answeredCount++;
                        const selectedOption = q.options.find(opt => opt.score.toString() === selectedOptionValue);
                        if (selectedOption) {
                            selectedCauses.push(...q.cause);
                        }
                    }
                });

                if (answeredCount < questions.length) {
                    alert('لطفا به تمام سوالات پاسخ دهید.');
                    return;
                }

                const deathAge = calculateLifeExpectancy(totalScore);
                const { birthYear, deathJalali } = getDeathDetails(deathAge);
                const { deathCauseText, randomBio } = getCauseAndBio(selectedCauses);
                const randomPoem = getRandomElement(poems);

                finalCongrats.textContent = `تبریک! تاریخ دقیق مرگ شما مشخص شد.`;
                tombstoneName.textContent = userName;
                tombstoneDates.textContent = `تاریخ تولد: ${birthYear} - وفات: ${deathJalali}`;
                tombstoneBio.textContent = randomBio;
                tombstoneCause.textContent = `${deathCauseText} (حدوداً در ${deathAge} سالگی)`;
                tombstonePoem.textContent = randomPoem;
                
                showSuggestions();
                showSection(resultsSection);
            });

            restartBtn.addEventListener('click', () => {
                userInfoForm.reset();
                questionsForm.innerHTML = '';
                showSection(userInfoSection);
            });
        });
    </script>
</body>
</html>
